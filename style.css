/* Base Variables - Reimporting previous context conceptually, 
   but since we completely rewrote style.css in step 48 to only include Editor styles, 
   we missed the root variables! This is why it looks bad. 
   Restoring root variables + new Hero styles. */

:root {
    --bg-color: #0f172a;
    --text-color: #f8fafc;
    --glass-bg: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.1);
    --primary-color: #3b82f6;
    --primary-hover: #2563eb;
    --accent-color: #8b5cf6;
    --radius-lg: 1rem;
    --radius-md: 0.5rem;
    --font-main: 'Inter', 'Noto Sans JP', sans-serif;
}

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-main);
    background-color: var(--bg-color);
    color: var(--text-color);
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    /* Center content vertically if needed, but flex layout is better */
}

/* Background Effects */
.background-blobs {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    overflow: hidden;
}

.blob {
    position: absolute;
    filter: blur(80px);
    opacity: 0.6;
    border-radius: 50%;
    animation: float 20s infinite alternate cubic-bezier(0.4, 0, 0.2, 1);
}

.blob-1 {
    width: 50vw;
    height: 50vw;
    background: radial-gradient(circle, #3b82f6 0%, transparent 60%);
    top: -10%;
    left: -10%;
}

.blob-2 {
    width: 40vw;
    height: 40vw;
    background: radial-gradient(circle, #8b5cf6 0%, transparent 60%);
    bottom: -10%;
    right: -10%;
    animation-delay: -5s;
}

.blob-3 {
    width: 30vw;
    height: 30vw;
    background: radial-gradient(circle, #ec4899 0%, transparent 60%);
    top: 40%;
    left: 40%;
    animation-delay: -10s;
}

@keyframes float {
    0% {
        transform: translate(0, 0) scale(1);
    }

    100% {
        transform: translate(100px, 50px) scale(1.1);
    }
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    display: flex;
    flex-direction: column;
    height: 100vh;
}

header {
    text-align: center;
    margin-bottom: 1rem;
}

header h1 {
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(to right, #3b82f6, #ec4899);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

header p {
    color: #94a3b8;
}

/* Glass Panel */
.glass-panel {
    background: var(--glass-bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

/* Buttons */
.primary-btn {
    background: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.3s;
    font-weight: 600;
}

.primary-btn:hover {
    background: var(--primary-hover);
    transform: translateY(-1px);
}

.secondary-btn {
    background: transparent;
    border: 1px solid var(--glass-border);
    color: white;
    border-radius: var(--radius-md);
    cursor: pointer;
    transition: all 0.2s;
}

.secondary-btn:hover {
    background: rgba(255, 255, 255, 0.1);
}


/* Layout Update */
.editor-layout {
    display: flex;
    gap: 1.5rem;
    flex: 1;
    /* Take remaining height */
    min-height: 0;
    /* Important for scroll */
    margin-bottom: 2rem;
}

/* Sidebar */
.gallery-sidebar {
    width: 250px;
    display: flex;
    flex-direction: column;
    padding: 1rem;
}

.gallery-sidebar h3 {
    font-size: 1rem;
    color: #94a3b8;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--glass-border);
}

.thumbnail-list {
    flex: 1;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    padding-right: 0.5rem;
}

/* Scrollbar styling */
.thumbnail-list::-webkit-scrollbar {
    width: 6px;
}

.thumbnail-list::-webkit-scrollbar-track {
    background: transparent;
}

.thumbnail-list::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
}

.thumb-item {
    position: relative;
    cursor: pointer;
    border-radius: var(--radius-md);
    overflow: hidden;
    border: 2px solid transparent;
    transition: all 0.2s;
    height: 120px;
    background: rgba(0, 0, 0, 0.2);
    flex-shrink: 0;
}

.thumb-item.active {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

.thumb-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.thumb-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 4px;
    background: rgba(0, 0, 0, 0.6);
    color: white;
    font-size: 0.7rem;
    display: flex;
    justify-content: space-between;
}

.sidebar-actions {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid var(--glass-border);
}

/* Main Editor */
.editor-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 1.5rem;
    position: relative;
}

/* Toolbar */
.toolbar {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--glass-border);
}

.tool-group {
    display: flex;
    background: rgba(0, 0, 0, 0.2);
    border-radius: var(--radius-md);
    padding: 4px;
    gap: 4px;
}

.tool-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: transparent;
    border: none;
    color: #94a3b8;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.tool-btn:hover {
    color: white;
    background: rgba(255, 255, 255, 0.1);
}

.tool-btn.active {
    background: var(--primary-color);
    color: white;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Emoji Sub Selector */
.emoji-sub-selector {
    display: flex;
    gap: 0.5rem;
    background: rgba(0, 0, 0, 0.2);
    padding: 0.5rem;
    border-radius: var(--radius-md);
    margin-left: 0.5rem;
    animation: fadeIn 0.3s ease;
    align-items: center;
    /* Center input */
}

.emoji-sub-selector.hidden {
    display: none;
}

.emoji-option {
    font-size: 1.5rem;
    cursor: pointer;
    padding: 2px 6px;
    border-radius: 4px;
    transition: transform 0.2s;
}

.emoji-option:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: scale(1.2);
}

.emoji-option.selected {
    background: rgba(255, 255, 255, 0.2);
    box-shadow: 0 0 0 1px var(--primary-color);
}

/* Custom Emoji Input Styling */
.custom-emoji-input {
    width: 60px;
    height: 40px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-md);
    color: white;
    font-size: 1.2rem;
    text-align: center;
    outline: none;
    transition: all 0.2s;
}

.custom-emoji-input::placeholder {
    color: rgba(255, 255, 255, 0.3);
    font-size: 0.8rem;
}

.custom-emoji-input:focus,
.custom-emoji-input.selected-input {
    border-color: var(--primary-color);
    background: rgba(59, 130, 246, 0.2);
    box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
}

/* Action Group (Right aligned) */
.action-group {
    margin-left: auto;
}

/* Canvas Area */
.canvas-container {
    flex: 1;
    position: relative;
    background: rgba(0, 0, 0, 0.3);
    border-radius: var(--radius-md);
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: crosshair;
    /* Indicate drawing */
}

/* Hero Upload (Updated) */
.hero-upload {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
    pointer-events: none;
}

.hero-content {
    text-align: center;
    background: rgba(15, 23, 42, 0.6);
    backdrop-filter: blur(10px);
    padding: 3rem;
    border-radius: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    pointer-events: auto;
    max-width: 500px;
    width: 90%;
    animation: heroFadeIn 0.8s cubic-bezier(0.2, 0.8, 0.2, 1);
}

.hero-icon-wrapper {
    position: relative;
    display: inline-block;
    margin-bottom: 1.5rem;
    color: var(--primary-color);
}

.hero-icon-wrapper svg {
    filter: drop-shadow(0 0 15px rgba(59, 130, 246, 0.5));
}

.hero-icon-badge {
    position: absolute;
    bottom: -5px;
    right: -5px;
    background: var(--accent-color);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.2rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
}

.hero-content h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    background: linear-gradient(to right, #fff, #94a3b8);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
}

.hero-content p {
    color: #94a3b8;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.hero-btn {
    padding: 1rem 2.5rem;
    font-size: 1.1rem;
    border-radius: 50px;
    /* Pill shape */
    background: linear-gradient(135deg, var(--primary-color), var(--accent-color));
    box-shadow: 0 10px 20px -5px rgba(59, 130, 246, 0.5);
    transition: transform 0.2s, box-shadow 0.2s;
    color: white;
    font-weight: bold;
    border: none;
    cursor: pointer;
}

.hero-btn:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 15px 30px -5px rgba(59, 130, 246, 0.6);
}

@keyframes heroFadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.hero-upload.hidden {
    display: none;
}

canvas {
    max-width: 100%;
    max-height: 100%;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(15, 23, 42, 0.9);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    backdrop-filter: blur(5px);
}

.loading-overlay.hidden {
    display: none;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid rgba(255, 255, 255, 0.1);
    border-top: 4px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 1rem;
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* Update sidebar actions for Download All */
.sidebar-actions {
    display: flex;
    gap: 0.5rem;
}

.sidebar-actions button {
    flex: 1;
    /* equal width */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.3rem;
}